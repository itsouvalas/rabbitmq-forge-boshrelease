---
name: rabbitmq

packages:
- erlang
- rabbitmq

provides:
- name: rabbitmq-servers
  type: rabbitmq-server

consumes:
- name: rabbitmq-servers
  type: rabbitmq-server

templates:
  bin/ctl:                    bin/ctl
  bin/monit_debugger:         bin/monit_debugger
  config/advanced.config.erb: config/advanced.config
  config/rabbitmq.conf.erb:   config/rabbitmq.conf
  config/erl_inetrc.erb:      config/erl_inetrc
  data/properties.sh.erb:     data/properties.sh
  helpers/ctl_setup.sh:       helpers/ctl_setup.sh
  helpers/ctl_utils.sh:       helpers/ctl_utils.sh
  tls/rabbitmq.ca.erb:        tls/rabbitmq.ca
  tls/rabbitmq.key.erb:       tls/rabbitmq.key
  tls/rabbitmq.crt.erb:       tls/rabbitmq.crt
  env.rb:                     env

properties:
  port:
    description: "Rabbitmq port"
    default: 5672

  management.enabled:
    description: "Install the rabbitmq management portal"
    default: true
  management.port:
    description: "Rabbitmq management portal port"
    default: 15672
  management.tls.port:
    description: "Rabbitmq management portal TLS port"
    default: 15671

  rabbitmq.tls.enabled:
    description: "Use TLS"
    default: false
  rabbitmq.tls.dual-mode:
    description: "Allow for TLS (5671) and Non-TLS (5672) both."
    default: true
  rabbitmq.tls.port:
    description: "TLS Port"
    default: 5671
  rabbitmq.tls.ca:
    description: The CA Sertificate for the Server Certificate
  rabbitmq.tls.crt:
    description: The Server Certificate
  rabbitmq.tls.key:
    description: The Server Key

  erlang.cookie:
    description: "Rabbitmq cookie for clustering"
    default: cf-cookie

  default_user:
    description: "Rabbitmq default username"
    default: guest

  default_password:
    description: "Rabbitmq default password"
    default: guest

